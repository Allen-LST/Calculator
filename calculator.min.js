let display=document.getElementById('display'),currentInput='0',previousInput=null,operator=null,waitingForOperand=false;function updateDisplay(){display.textContent=currentInput}function inputNumber(num){waitingForOperand?(currentInput=num,waitingForOperand=false):currentInput=currentInput==='0'?num:currentInput+num,updateDisplay()}function inputDecimal(){waitingForOperand?(currentInput='0.',waitingForOperand=false):currentInput.indexOf('.')===-1&&(currentInput+='.'),updateDisplay()}function inputOperator(nextOperator){const inputValue=parseFloat(currentInput);previousInput===null?previousInput=inputValue:operator&&(currentValue=previousInput||0,newValue=performCalculation(currentValue,inputValue,operator),currentInput=String(newValue),previousInput=newValue,updateDisplay()),waitingForOperand=true,operator=nextOperator}function performCalculation(firstOperand,secondOperand,operator){switch(operator){case'+':return firstOperand+secondOperand;case'-':return firstOperand-secondOperand;case'Ã—':return firstOperand*secondOperand;case'Ã·':return secondOperand!==0?firstOperand/secondOperand:0;case'%':return firstOperand%secondOperand;default:return secondOperand}}function calculate(){const inputValue=parseFloat(currentInput);previousInput!==null&&operator&&(newValue=performCalculation(previousInput,inputValue,operator),currentInput=String(newValue),previousInput=null,operator=null,waitingForOperand=true,updateDisplay())}function clearAll(){currentInput='0',previousInput=null,operator=null,waitingForOperand=false,updateDisplay()}function deleteLast(){currentInput.length>1?currentInput=currentInput.slice(0,-1):currentInput='0',updateDisplay()}function toggleSign(){currentInput!=='0'&&(currentInput=currentInput.startsWith('-')?currentInput.slice(1):'-'+currentInput,updateDisplay())}document.addEventListener('keydown',function(event){const key=event.key;key>='0'&&key<='9'?inputNumber(key):key==='.'?inputDecimal():key==='+'?inputOperator('+'):key==='-'?inputOperator('-'):key==='*'?inputOperator('Ã—'):key==='/'?(event.preventDefault(),inputOperator('Ã·')):key==='%'?inputOperator('%'):key==='Enter'||key==='='?calculate():key==='Escape'||key==='c'||key==='C'?clearAll():key==='Backspace'&&deleteLast()}),updateDisplay();
